{"version":3,"sources":["../../src/driver.ts","../../src/Bls12381G2KeyPair.ts","../../bls12381/node_modules/@mattrglobal/bbs-signatures/lib sync","serviceWorker.js","store/history.js","store/universal-wallet/actions.js","store/universal-wallet/reducer.js","store/universal-wallet/redux.js","store/universal-wallet/index.js","store/universal-wallet/container.js","store/index.js","components/Theme/Theme.js","pages/base/menu.js","pages/base/drawer.js","pages/base/base.js","pages/home/Home.js","pages/home/index.js","components/VaultWallet.js","components/VaultAdapter.js","pages/workbench/Workbench.js","pages/workbench/index.js","components/ScanQRCodeDialog/ScanQRCodeDialog.js","../../src/resolver.ts","networking/documentLoader.js","pages/pdf/OfflinePDF.js","pages/pdf/index.js","pages/videos/Videos.js","pages/index.js","pages/videos/index.js","components/ParticlesContainer/ParticlesContainer.js","pages/errors/404.js","store/create.js","index.js","../../src/EdDSA.ts","../../src/keyUtils.ts","../../src/Ed25519KeyPair.ts","../../src/X25519KeyPair.ts","../../src/ES256K.ts","../../src/Secp256k1KeyPair.ts","../../bls12381/dist/index.js","store/universal-wallet/handlers.js","assets/logo.svg"],"names":["keyToDidDoc","bls12381Key","did","fingerprint","keyId","id","publicKey","type","controller","publicKeyBase58","bs58","encode","publicKeyBuffer","authentication","assertionMethod","capabilityDelegation","capabilityInvocation","url","TypeError","split","pop","Bls12381G2KeyPair","fromFingerprint","generate","options","keyPair","generateBls12381KeyPair","mattr","privateKeyBase58","secretKey","webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","Boolean","window","location","hostname","match","createBrowserHistory","setUniversalWalletProp","createAction","payload","handleActions","state","name","status","contents","vaultEndpoint","isSyncEnabled","isSyncing","connect","wallet","actions","reducer","container","compose","withRedux","withHandlers","router","connectRouter","history","font1","font2","font3","Theme","children","this","props","theme","createMuiTheme","splashImage","palette","primary","light","lighten","main","dark","darken","secondary","typography","useNextVariants","fontSize","fontFamily","join","h1","fontWeight","h2","h3","h4","textTransform","letterSpacing","h5","h6","subtitle1","subtitle2","body1","body2","button","caption","overline","overrides","MuiInput","input","MuiInputLabel","root","MuiAppBar","MuiButton","contained","boxShadow","Component","StyledMenu","withStyles","paper","border","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","backgroundColor","color","common","white","MenuItem","CustomizedMenus","React","useState","anchorEl","setAnchorEl","IconButton","aria-controls","aria-haspopup","onClick","event","currentTarget","keepMounted","open","onClose","push","ListItemIcon","ListItemText","DrawerContent","List","ListItem","useStyles","makeStyles","display","width","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","breakpoints","up","toolbar","alignItems","justifyContent","padding","mixins","content","flexGrow","MiniDrawer","classes","useTheme","setOpen","className","CssBaseline","AppBar","position","clsx","Toolbar","aria-label","edge","src","logo","alt","title","style","height","Drawer","variant","direction","Divider","Home","didDocument","setState","generateEd25519","a","ed25519","secureRandom","crypto","randomBytes","ed25519Key","x25519","fromEdKeyPair","x25519Key","generateSecp256k1","secp256k1","secp256k1Key","generateBls12381","bls12381","bls12381G2Key","privateKeyBuffer","useEffect","Grid","item","sm","xs","Button","Typography","gutterBottom","value","JSON","stringify","VaultWallet","walletState","image","VaultAdapter","syncVault","Workbench","ScanQRCodeDialog","data","handleClose","handleSubmit","preventDefault","onSubmit","Dialog","fullScreen","aria-labelledby","DialogTitle","DialogContent","delay","resolution","onError","onScan","context","AudioContext","freq","vol","oscillator","createOscillator","gain","createGain","frequency","destination","start","currentTime","stop","beep","console","error","DialogActions","resolver","encodedType","idchar","maybeCached","localStorage","getItem","log","contextUrl","document","parse","documentUrl","indexOf","setItem","jsonld","documentLoader","res","require","vcjs","Ed25519Signature2018","suites","defaultVc","issuer","issuanceDate","Date","toISOString","credentialSubject","qrOptions","ecLevel","fgColor","size","hideLogo","orientation","unit","format","generatePrivateKey","Ed25519KeyPair","edKey","OfflinePDF","isScanQrCodeDialogOpen","key","vc","verified","panel0","panel1","panel2","panel3","panelValues","setPanelValues","handleChangePanels","panel","renderVC","proof","filename","x","y","toPdf","targetRef","Fragment","textAlign","margin","ref","ExpansionPanel","expanded","onChange","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","flexDirection","marginBottom","setTimeout","terrible","suite","verify","credential","result","from","doc","driver","key1","md","jsonObject","renderVerify","disabled","issue","signed","PdfDemo","Videos","marginTop","frameborder","allow","allowfullscreen","routes","path","exact","component","ParticlesContainer","params","particles","line_linked","shadow","enable","blur","top","NotFound","pathname","href","appReducers","persistConfig","whitelist","storage","middlewares","thunk","routerMiddleware","store","createStore","persistReducer","combineReducers","rootReducer","composeWithDevTools","applyMiddleware","withReduxEnhancer","persistor","persistStore","ReactDOM","render","map","getElementById","navigator","serviceWorker","ready","then","registration","unregister","JWSVerificationFailed","_jwkToSecretKey","jwk","d","base64url","Uint8Array","Buffer","_jwkToPublicKey","decode","jws","complete","encodedHeader","encodedPayload","encodedSignature","header","signature","sign","alg","canonicalize","message","signDetached","verifyDetached","getKid","copy","digest","publicKeyBase58FromPublicKeyHex","privateKeyBase58FromPrivateKeyHex","publicKeyJwkFromPublicKeyBase58","crv","kty","kid","privateKeyJwkFromPrivateKeyBase58","privateKeyBuf","publicKeyBase58FromPublicKeyJwk","publicKeyJwk","privateKeyBase58FromPrivateKeyJwk","privateKeyJwk","publicKeyHexFromPublicKeyBase58","privateKeyHexFromPrivateKeyBase58","pubkeyBytes","buffer","isAvailable","keyUtils","addEncodedPublicKey","publicKeyNode","publicNode","verifyFingerprint","valid","fingerprintBuffer","_private","toX25519KeyPair","signer","signatureUInt8Array","verifier","keyAgreement","publicKeyBytes","privateKeyBytes","_jwk","X25519KeyPair","ed25519KeyPair","convertPublicKeyToX25519","convertSecretKeyToX25519","deriveSecret","remotePubkeyBytes","privateKeyJwkFromPrivateKeyHex","keyto","publicKeyJwkFromPublicKeyHex","publicKeyHex","keyBin","privateKeyHexFromJwk","publicKeyHexFromJwk","uncompressedPublicKey","compressed","privateKeyUInt8ArrayFromJwk","privateKeyHex","publicKeyUInt8ArrayFromJwk","privateKeyUInt8ArrayFromPrivateKeyBase58","publicKeyUInt8ArrayFromPublicKeyBase58","privateKeyPem","publicKeyPem","b64","crit","privateKeyUInt8Array","toBeSignedBuffer","messageHashUInt8Array","sigObj","publicKeyUInt8Array","toBeSigned","_generate","privateKey","Secp256k1KeyPair","getClient","_wallet","UniversalWallet2020","entropy","find","c","VaultClient","fromDerivedContents","client","isContentPersisted","localContents","undefined","generateWallet","_seed","toggleLockStatus","password","unlock","lock","deleteWallet","importWallet","encryptedWallet","import","exportWallet","export","saveWallet","issueCredential","verifiableCredential","proveVerifiableCredential","prove","verifiablePresentation","getWalletContents","tableData","EdvClient","generateId","schema","addWalletContent"],"mappings":"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","file":"static/js/main.2c624795.chunk.js","sourcesContent":["import { Secp256k1KeyPair } from './Secp256k1KeyPair';\nexport const computeKeyId = async ({ key }: any) => {\n  return `did:key:${key.fingerprint()}#${key.fingerprint()}`;\n};\n\nexport const keyToDidDoc = (secp256k1Key: any) => {\n  const did = `did:key:${secp256k1Key.fingerprint()}`;\n  const keyId = `#${secp256k1Key.fingerprint()}`;\n  return {\n    '@context': [\n      'https://www.w3.org/ns/did/v1',\n      {\n        '@base': did,\n      },\n    ],\n    id: did,\n    publicKey: [\n      {\n        id: keyId,\n        type: secp256k1Key.type,\n        controller: did,\n        publicKeyBase58: secp256k1Key.publicKeyBase58,\n      },\n    ],\n    authentication: [keyId],\n    assertionMethod: [keyId],\n    capabilityDelegation: [keyId],\n    capabilityInvocation: [keyId],\n  };\n};\n\nexport const get = async ({ did, url }: any = {}) => {\n  did = did || url;\n  if (!did) {\n    throw new TypeError('\"did\" must be a string.');\n  }\n  const fingerprint = did\n    .split('#')[0]\n    .split('did:key:')\n    .pop();\n  const publicKey = await Secp256k1KeyPair.fromFingerprint({ fingerprint });\n  const didDoc = keyToDidDoc(publicKey);\n  return didDoc;\n};\n","import * as mattr from '@mattrglobal/bls12381-key-pair';\n\nimport { generateBls12381KeyPair } from '@mattrglobal/bbs-signatures';\nimport * as bs58 from 'bs58';\n\nexport class Bls12381G2KeyPair extends mattr.Bls12381G2KeyPair {\n  static async generate(options: any) {\n    const keyPair = generateBls12381KeyPair();\n    return new mattr.Bls12381G2KeyPair({\n      ...options,\n      privateKeyBase58: bs58.encode(keyPair.secretKey as Uint8Array),\n      publicKeyBase58: bs58.encode(keyPair.publicKey),\n    });\n  }\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1218;","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    || window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all '\n                  + 'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404\n        || (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();\n","import { createAction } from 'redux-actions';\n\nexport const setUniversalWalletProp = createAction(\n  'universal-wallet/SET_UNIVERSAL_WALLET_PROP',\n  (payload) => payload\n);\n","import { handleActions } from \"redux-actions\";\nimport { setUniversalWalletProp } from \"./actions\";\n\nconst initialState = {\n  name: \"UniversalWallet2020\",\n  status: \"UNLOCKED\",\n  contents: [],\n  vaultEndpoint: \"https://edv.did.ai/edvs\",\n  isSyncEnabled: true,\n  isSyncing: false,\n};\n\nexport default handleActions(\n  {\n    [setUniversalWalletProp]: (state, { payload }) => ({\n      ...state,\n      ...payload,\n    }),\n  },\n  initialState\n);\n","import { connect } from 'react-redux';\nimport * as actions from './actions';\n\nexport default connect(({ wallet }) => ({ wallet }), { ...actions });\n","import reducer from './reducer';\nimport container from './container';\n\nexport default {\n  reducer,\n  container,\n};\n","import { compose } from 'recompose';\nimport withRedux from './redux';\nimport withHandlers from './handlers';\n\nexport default compose(withRedux, withHandlers);\n","import { connectRouter } from \"connected-react-router\";\n\nimport history from \"./history\";\n\nimport wallet from \"./universal-wallet\";\n\nexport default {\n  router: connectRouter(history),\n  wallet: wallet.reducer,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport { darken, lighten } from '@material-ui/core/styles/colorManipulator';\n\nconst primaryColor = '#594aa8';\nconst secondaryColor = '#fcb373';\n\nconst font1 = '\"Rajdhani\"';\nconst font2 = '\"Roboto Condensed\"';\nconst font3 = '\"Lato\"';\n\nconst fontWeightLight = 300;\nconst fontWeightRegular = 400;\nconst fontWeightMedium = 600;\n\nclass Theme extends Component {\n  render() {\n    const { children } = this.props;\n    const theme = createMuiTheme({\n      splashImage: '',\n      palette: {\n        type: 'light',\n        primary: {\n          light: lighten(primaryColor, 0.07),\n          main: primaryColor,\n          dark: darken(primaryColor, 0.07),\n        },\n        secondary: {\n          light: lighten(secondaryColor, 0.07),\n          main: secondaryColor,\n          dark: darken(secondaryColor, 0.07),\n        },\n      },\n      typography: {\n        useNextVariants: true,\n        fontSize: 16,\n        fontFamily: [font1, font2, font3].join(','),\n        h1: {\n          fontFamily: font1,\n          fontWeight: fontWeightMedium,\n        },\n        h2: {\n          fontFamily: font1,\n          fontWeight: fontWeightMedium,\n        },\n        h3: {\n          fontFamily: font1,\n          fontWeight: fontWeightMedium,\n        },\n        h4: {\n          fontFamily: font2,\n          textTransform: 'uppercase',\n          letterSpacing: '0.1em',\n          fontWeight: fontWeightRegular,\n        },\n        h5: {\n          fontFamily: font2,\n          textTransform: 'uppercase',\n          letterSpacing: '0.1em',\n          fontWeight: fontWeightRegular,\n        },\n        h6: {\n          fontFamily: font2,\n          textTransform: 'uppercase',\n          letterSpacing: '0.05em',\n          fontWeight: fontWeightRegular,\n        },\n        subtitle1: {\n          fontFamily: font1,\n          fontWeight: fontWeightRegular,\n        },\n        subtitle2: {\n          fontFamily: font2,\n          fontWeight: fontWeightRegular,\n        },\n        body1: {\n          fontFamily: font3,\n          fontWeight: fontWeightRegular,\n        },\n        body2: {\n          fontFamily: font3,\n          fontWeight: fontWeightRegular,\n        },\n        button: {\n          fontFamily: font2,\n          fontWeight: fontWeightRegular,\n        },\n        caption: {\n          fontFamily: font2,\n          fontWeight: fontWeightRegular,\n        },\n        overline: {\n          fontFamily: font2,\n          letterSpacing: '0.15em',\n          textTransform: 'uppercase',\n          fontWeight: fontWeightLight,\n        },\n      },\n\n      overrides: {\n        MuiInput: {\n          // Name of the component ⚛️ / style sheet\n          input: {\n            fontFamily: font3,\n          },\n        },\n        MuiInputLabel: {\n          // Name of the component ⚛️ / style sheet\n          root: {\n            fontFamily: font2,\n          },\n        },\n        MuiAppBar: {\n          root: {\n            // boxShadow: 'none',\n          },\n        },\n        MuiButton: {\n          // Name of the rule\n          contained: {\n            boxShadow: 'none',\n          },\n        },\n      },\n    });\n    return <MuiThemeProvider theme={theme}>{children}</MuiThemeProvider>;\n  }\n}\n\nTheme.propTypes = {\n  children: PropTypes.any.isRequired,\n};\n\nexport default Theme;\n","import React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport HomeIcon from \"@material-ui/icons/Home\";\n\nimport history from \"../../store/history\";\n\nconst StyledMenu = withStyles({\n  paper: {\n    border: \"1px solid #d3d4d5\",\n  },\n})((props) => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: \"bottom\",\n      horizontal: \"center\",\n    }}\n    transformOrigin={{\n      vertical: \"top\",\n      horizontal: \"center\",\n    }}\n    {...props}\n  />\n));\n\nconst StyledMenuItem = withStyles((theme) => ({\n  root: {\n    \"&:focus\": {\n      backgroundColor: theme.palette.primary.main,\n      \"& .MuiListItemIcon-root, & .MuiListItemText-primary\": {\n        color: theme.palette.common.white,\n      },\n    },\n  },\n}))(MenuItem);\n\nexport default function CustomizedMenus() {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        color={\"inherit\"}\n        aria-controls=\"customized-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <StyledMenu\n        id=\"customized-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <StyledMenuItem\n          onClick={() => {\n            history.push(\"/workbench\");\n          }}\n        >\n          <ListItemIcon>\n            <HomeIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText primary=\"Workbench\" />\n        </StyledMenuItem>\n      </StyledMenu>\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport HttpIcon from \"@material-ui/icons/Http\";\nimport CodeIcon from \"@material-ui/icons/Code\";\nimport GavelIcon from \"@material-ui/icons/Gavel\";\nimport BuildIcon from \"@material-ui/icons/Build\";\nimport PictureAsPdfIcon from \"@material-ui/icons/PictureAsPdf\";\nimport YouTubeIcon from \"@material-ui/icons/YouTube\";\nimport history from \"../../store/history\";\n\nexport default function DrawerContent() {\n  return (\n    <List>\n      <ListItem\n        button\n        onClick={() => {\n          history.push(\"/\");\n        }}\n      >\n        <ListItemIcon>\n          <HomeIcon />\n        </ListItemIcon>\n        <ListItemText primary={\"Home\"} />\n      </ListItem>\n\n      <ListItem\n        button\n        onClick={() => {\n          history.push(\"/workbench\");\n        }}\n      >\n        <ListItemIcon>\n          <BuildIcon />\n        </ListItemIcon>\n        <ListItemText primary={\"Workbench\"} />\n      </ListItem>\n\n      <ListItem\n        button\n        onClick={() => {\n          history.push(\"/offline\");\n        }}\n      >\n        <ListItemIcon>\n          <PictureAsPdfIcon />\n        </ListItemIcon>\n        <ListItemText primary={\"PDF Demo\"} />\n      </ListItem>\n\n      <ListItem\n        button\n        onClick={() => {\n          history.push(\"/videos\");\n        }}\n      >\n        <ListItemIcon>\n          <YouTubeIcon />\n        </ListItemIcon>\n        <ListItemText primary={\"Videos\"} />\n      </ListItem>\n\n      <ListItem\n        button\n        onClick={() => {\n          window.open(\"https://w3c-ccg.github.io/did-method-key/\");\n        }}\n      >\n        <ListItemIcon>\n          <GavelIcon />\n        </ListItemIcon>\n        <ListItemText primary={\"Spec\"} />\n      </ListItem>\n\n      <ListItem\n        button\n        onClick={() => {\n          window.open(\"https://did-key.web.app/api/docs\");\n        }}\n      >\n        <ListItemIcon>\n          <HttpIcon />\n        </ListItemIcon>\n        <ListItemText primary={\"API\"} />\n      </ListItem>\n\n      <ListItem\n        button\n        onClick={() => {\n          window.open(\"https://github.com/transmute-industries/did-key.js\");\n        }}\n      >\n        <ListItemIcon>\n          <CodeIcon />\n        </ListItemIcon>\n        <ListItemText primary={\"Code\"} />\n      </ListItem>\n    </List>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\n\nimport Theme from '../../components/Theme/Theme';\nimport logo from '../../assets/logo.svg';\n\nimport Menu from './menu';\nimport DrawerContent from './drawer';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    width: '100%',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nexport default function MiniDrawer({ children }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Theme>\n      <div className={classes.root}>\n        <CssBaseline />\n        <AppBar\n          position=\"fixed\"\n          className={clsx(classes.appBar, {\n            [classes.appBarShift]: open,\n          })}\n        >\n          <Toolbar>\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              onClick={handleDrawerOpen}\n              edge=\"start\"\n              className={clsx(classes.menuButton, {\n                [classes.hide]: open,\n              })}\n            >\n              <MenuIcon />\n            </IconButton>\n            <img\n              src={logo}\n              alt={'logo'}\n              className={classes.title}\n              style={{ height: '28px' }}\n            />\n            <div style={{ flexGrow: 1 }}></div>\n            <Menu />\n          </Toolbar>\n        </AppBar>\n        <Drawer\n          variant=\"permanent\"\n          className={clsx(classes.drawer, {\n            [classes.drawerOpen]: open,\n            [classes.drawerClose]: !open,\n          })}\n          classes={{\n            paper: clsx({\n              [classes.drawerOpen]: open,\n              [classes.drawerClose]: !open,\n            }),\n          }}\n        >\n          <div className={classes.toolbar}>\n            <IconButton onClick={handleDrawerClose}>\n              {theme.direction === 'rtl' ? (\n                <ChevronRightIcon />\n              ) : (\n                <ChevronLeftIcon />\n              )}\n            </IconButton>\n          </div>\n          <Divider />\n          <DrawerContent />\n        </Drawer>\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          {children}\n        </main>\n      </div>\n    </Theme>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport crypto from \"crypto\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Base from \"../base/base\";\nimport * as bs58 from \"bs58\";\nimport * as ed25519 from \"@transmute/did-key-ed25519\";\nimport * as x25519 from \"@transmute/did-key-x25519\";\nimport * as secp256k1 from \"@transmute/did-key-secp256k1\";\nimport * as bls12381 from \"@transmute/did-key-bls12381\";\nimport { DIDDocumentPreview, JSONEditor } from \"@transmute/material-did-core\";\n\nexport const Home = (props) => {\n  const [state, setState] = React.useState({\n    keys: null,\n    didDocument: null,\n  });\n\n  const generateEd25519 = async () => {\n    (async () => {\n      const ed25519Key = await ed25519.Ed25519KeyPair.generate({\n        secureRandom: () => {\n          return crypto.randomBytes(32);\n        },\n      });\n      const x25519Key = await x25519.X25519KeyPair.fromEdKeyPair(ed25519Key);\n      const didDocument = ed25519.driver.keyToDidDoc(ed25519Key);\n      setState((state) => {\n        return {\n          ...state,\n          keys: { ed25519Key, x25519Key },\n          didDocument,\n        };\n      });\n    })();\n  };\n\n  const generateSecp256k1 = async () => {\n    (async () => {\n      const secp256k1Key = await secp256k1.Secp256k1KeyPair.generate({\n        secureRandom: () => {\n          return crypto.randomBytes(32);\n        },\n      });\n      const didDocument = secp256k1.driver.keyToDidDoc(secp256k1Key);\n      setState((state) => {\n        return {\n          ...state,\n          keys: { secp256k1Key },\n          didDocument,\n        };\n      });\n    })();\n  };\n\n  const generateBls12381 = async () => {\n    (async () => {\n      const bls12381G2Key = await bls12381.Bls12381G2KeyPair.generate();\n      const didDocument = bls12381.driver.keyToDidDoc(bls12381G2Key);\n      setState((state) => {\n        return {\n          ...state,\n          keys: {\n            bls12381G2Key: {\n              ...didDocument.publicKey[0],\n              privateKeyBase58: bs58.encode(bls12381G2Key.privateKeyBuffer),\n            },\n          },\n          didDocument,\n        };\n      });\n    })();\n  };\n\n  React.useEffect(() => {\n    if (state.keys === null) {\n      generateEd25519();\n    }\n  });\n  if (!props.wallet) {\n    return <div>loading...</div>;\n  }\n  return (\n    <Base>\n      <Grid container spacing={4}>\n        <Grid item sm={12} xs={12}>\n          <Button\n            variant={\"contained\"}\n            style={{ marginRight: \"8px\" }}\n            onClick={() => {\n              generateEd25519();\n            }}\n          >\n            Ed25519\n          </Button>\n\n          <Button\n            variant={\"contained\"}\n            style={{ marginRight: \"8px\" }}\n            onClick={() => {\n              generateSecp256k1();\n            }}\n          >\n            Secp256k1\n          </Button>\n          <Button\n            variant={\"contained\"}\n            style={{ marginRight: \"8px\" }}\n            onClick={() => {\n              generateBls12381();\n            }}\n          >\n            Bls12381\n          </Button>\n        </Grid>\n\n        {state.didDocument !== null && (\n          <Grid item sm={12} xs={12}>\n            <Typography variant={\"h6\"} gutterBottom>\n              DID Document\n            </Typography>\n            <DIDDocumentPreview didDocument={state.didDocument} />\n          </Grid>\n        )}\n        <Grid item sm={12} xs={12}>\n          <Typography variant={\"h6\"} gutterBottom>\n            Key\n          </Typography>\n          <JSONEditor value={JSON.stringify(state.keys, null, 2)} />\n        </Grid>\n      </Grid>\n    </Base>\n  );\n};\n\nHome.propTypes = {\n  wallet: PropTypes.any,\n};\n","import React from \"react\";\nimport { Home as Page } from \"./Home\";\n\nimport { compose } from \"redux\";\n\nimport wallet from \"../../store/universal-wallet\";\n\nconst container = compose(wallet.container);\n\nexport const Home = container((props) => {\n  return <Page {...props} />;\n});\n","import React from 'react';\n\nimport { UniversalWallet } from '@transmute/material-did-core';\n\nconst image =\n  'https://www.transmute.industries/svg/Logo-Transmute-icon-Purp.svg';\n\nexport const VaultWallet = (props) => {\n  return (\n    <div>\n      <UniversalWallet walletState={props.wallet} image={image} {...props} />\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { DataVault } from '@transmute/material-did-core';\n\nexport const VaultAdapter = ({ wallet, syncVault }) => {\n  return (\n    <div>\n      <DataVault {...wallet} syncVault={syncVault} />\n    </div>\n  );\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Grid from '@material-ui/core/Grid';\nimport Base from '../base/base';\n\nimport { VaultWallet } from '../../components/VaultWallet';\nimport { VaultAdapter } from '../../components/VaultAdapter';\n\nexport const Workbench = (props) => {\n  if (!props.wallet) {\n    return <div>loading...</div>;\n  }\n  return (\n    <Base>\n      <Grid container spacing={4}>\n        <Grid item>\n          <VaultWallet {...props} />\n        </Grid>\n        <Grid item>\n          <VaultAdapter {...props} />\n        </Grid>\n      </Grid>\n    </Base>\n  );\n};\n\nWorkbench.propTypes = {\n  wallet: PropTypes.any,\n};\n","import React from 'react';\nimport { Workbench as Page } from './Workbench';\n\nimport { compose } from 'redux';\n\nimport wallet from '../../store/universal-wallet';\n\nconst container = compose(wallet.container);\n\nexport const Workbench = container((props) => {\n  return <Page {...props} />;\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Button from \"@material-ui/core/Button\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\n\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n// import Typography from '@material-ui/core/Typography';\n\nimport QrReader from \"react-qr-reader\";\nimport { JSONEditor } from \"@transmute/material-did-core\";\nexport class ScanQRCodeDialog extends React.Component {\n  state = {\n    data: \"\",\n  };\n\n  handleClose = () => {\n    this.props.onClose();\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.data);\n  };\n\n  render() {\n    return (\n      <div>\n        <Dialog\n          fullScreen\n          open={this.props.open}\n          onClose={this.handleClose}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">Scan QR Code</DialogTitle>\n          <DialogContent>\n            <Grid container>\n              <Grid item xs={12} sm={4}>\n                <QrReader\n                  delay={100}\n                  resolution={800}\n                  onError={() => {\n                    // do nothing\n                  }}\n                  onScan={(data) => {\n                    if (data) {\n                      let context = null;\n                      const beep = (freq = 520, duration = 200, vol = 100) => {\n                        const oscillator = context.createOscillator();\n                        const gain = context.createGain();\n                        oscillator.connect(gain);\n                        oscillator.frequency.value = freq;\n                        oscillator.type = \"square\";\n                        gain.connect(context.destination);\n                        gain.gain.value = vol * 0.01;\n                        oscillator.start(context.currentTime);\n                        oscillator.stop(context.currentTime + duration * 0.001);\n                      };\n                      context = new AudioContext();\n                      beep(300, 300, 25);\n                      try {\n                        this.setState({\n                          data: data,\n                        });\n                      } catch (e) {\n                        console.error(e);\n                      }\n                    }\n                  }}\n                  style={{ width: \"100%\" }}\n                />\n              </Grid>\n              <Grid item xs={12} sm={8}>\n                <JSONEditor\n                  value={this.state.data}\n                  // style={{ height: \"128px\" }}\n                />\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleClose}>Cancel</Button>\n            <Button\n              onClick={this.handleSubmit}\n              color=\"primary\"\n              variant=\"contained\"\n            >\n              Proceed\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nScanQRCodeDialog.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  onSubmit: PropTypes.func,\n};\n","export const resolver = {\n  resolve: (did: string) => {\n    if (did.indexOf('did:key:') !== 0) {\n      throw new Error('did must be of method did:key.');\n    }\n    const idchar: any = did.split('did:key:').pop();\n    const encodedType = idchar.substring(0, 4);\n    switch (encodedType) {\n      case 'z6Mk':\n        return require('@transmute/did-key-ed25519').driver.get({ did });\n      case 'z6LS':\n        return require('@transmute/did-key-x25519').driver.get({ did });\n      case 'zUC7':\n        return require('@transmute/did-key-bls12381').driver.get({ did });\n      case 'zQ3s':\n        return require('@transmute/did-key-secp256k1').driver.get({ did });\n      default:\n        throw new Error('Unknown DID Key type: ' + encodedType);\n    }\n  },\n};\n","import jsonld from \"jsonld\";\n\nimport { resolver } from \"@transmute/did-key.js\";\n\nexport default async (url) => {\n  let maybeCached = localStorage.getItem(url);\n  if (maybeCached) {\n    console.log(\"using cache for: \", url);\n    return {\n      contextUrl: null, // this is for a context via a link header\n      document: JSON.parse(maybeCached), // this is the actual document that was loaded\n      documentUrl: url, // this is the actual context URL after redirects\n    };\n  }\n\n  if (url.indexOf(\"did:key\") !== -1) {\n    const didDocument = await resolver.resolve(url);\n    localStorage.setItem(url, JSON.stringify(didDocument));\n    return {\n      contextUrl: null, // this is for a context via a link header\n      document: didDocument, // this is the actual document that was loaded\n      documentUrl: url, // this is the actual context URL after redirects\n    };\n  }\n\n  try {\n    console.log(\"downloading...\", url);\n    let res = await jsonld.documentLoader(url);\n    localStorage.setItem(url, JSON.stringify(res.document));\n    return res;\n  } catch (e) {\n    console.error(\"No remote context support for \" + url);\n  }\n  throw new Error(\"No custom context support for \" + url);\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Grid from \"@material-ui/core/Grid/Grid\";\n\nimport { QR } from \"@bloomprotocol/qr-react\";\n\nimport ReactToPdf from \"react-to-pdf\";\n\nimport { Ed25519KeyPair, driver } from \"@transmute/did-key-ed25519\";\nimport { JSONEditor } from \"@transmute/material-did-core\";\n\nimport BasePage from \"../base/base\";\n\nimport { ScanQRCodeDialog } from \"../../components/ScanQRCodeDialog\";\nimport documentLoader from \"../../networking/documentLoader\";\nconst crypto = require(\"crypto\");\nconst vcjs = require(\"vc-js\");\nconst jsigs = require(\"jsonld-signatures\");\nconst { Ed25519Signature2018 } = jsigs.suites;\n\nconst defaultVc = {\n  \"@context\": [\n    \"https://www.w3.org/2018/credentials/v1\",\n    \"https://www.w3.org/2018/credentials/examples/v1\",\n  ],\n  id: \"http://ex.gov/1\",\n  type: [\"VerifiableCredential\"],\n  issuer: \"https://example.edu\",\n  issuanceDate: new Date().toISOString(),\n  credentialSubject: {\n    id: \"did:ex:2\",\n    type: \"BD\",\n    name: \"CyS\",\n  },\n};\n\nconst qrOptions = {\n  ecLevel: \"L\",\n  fgColor: \"#000\",\n  padding: 32,\n  size: 400,\n  hideLogo: true,\n};\n\nconst options = {\n  orientation: \"portrait\",\n  unit: \"px\",\n  format: \"A4\",\n};\n\nconst generatePrivateKey = async () => {\n  const edKey = await Ed25519KeyPair.generate({\n    secureRandom: () => {\n      return crypto.randomBytes(32);\n    },\n  });\n  // console.log(edKey);\n  // window.edKey = edKey;\n  return edKey;\n};\n\nexport const OfflinePDF = () => {\n  const [state, setState] = React.useState({\n    isScanQrCodeDialogOpen: false,\n    key: null,\n    vc: defaultVc,\n    verified: false,\n  });\n  const { isScanQrCodeDialogOpen, key, vc } = state;\n\n  const [panelValues, setPanelValues] = React.useState({\n    panel0: false,\n    panel1: false,\n    panel2: false,\n    panel3: false,\n  });\n\n  const handleChangePanels = (panel) => () => {\n    setPanelValues({\n      ...panelValues,\n      // eslint-disable-next-line\n      [panel]: !panelValues[panel],\n    });\n  };\n\n  const renderKey = () => {\n    if (!key) {\n      return \"\";\n    }\n    return (\n      <ReactToPdf\n        filename=\"did-key-private-key.pdf\"\n        options={options}\n        x={70}\n        y={50}\n      >\n        {({ toPdf, targetRef }) => {\n          window.toPdf = toPdf;\n          return (\n            <React.Fragment>\n              <div\n                style={{\n                  display: \"block\",\n                  padding: \"16px\",\n                  width: \"500px\",\n                  height: \"500px\",\n                  textAlign: \"center\",\n                  margin: \"0 auto\",\n                }}\n                ref={targetRef}\n              >\n                <Typography variant={\"h5\"}>Private Key</Typography>\n                <div>\n                  <QR\n                    data={{\n                      privateKeyBase58: key.privateKeyBase58,\n                      publicKeyBase58: key.publicKeyBase58,\n                    }}\n                    options={qrOptions}\n                  />\n                </div>\n                <Typography variant={\"caption\"}>\n                  {key.controller.split(\":\").pop()}\n                </Typography>\n              </div>\n            </React.Fragment>\n          );\n        }}\n      </ReactToPdf>\n    );\n  };\n\n  const renderVC = () => {\n    if (!vc || !vc.proof) {\n      return \"\";\n    }\n    return (\n      <ReactToPdf\n        filename=\"did-key-verifiable-credential.pdf\"\n        options={options}\n        x={80}\n        y={50}\n      >\n        {({ toPdf, targetRef }) => {\n          window.toPdf = toPdf;\n\n          return (\n            <React.Fragment>\n              <div\n                style={{\n                  display: \"block\",\n                  padding: \"16px\",\n                  width: \"500px\",\n                  height: \"500px\",\n                  textAlign: \"center\",\n                  margin: \"0 auto\",\n                  // marginBottom: \"-100px\",\n                }}\n                ref={targetRef}\n              >\n                <Typography variant={\"h5\"}>Credential</Typography>\n                <div>\n                  <QR data={vc} options={{ ...qrOptions, padding: 8 }} />\n                </div>\n                <Typography variant={\"caption\"}>{vc.id}</Typography>\n              </div>\n            </React.Fragment>\n          );\n        }}\n      </ReactToPdf>\n    );\n  };\n\n  const renderVerify = (vc) => {\n    if (!vc.proof) {\n      return \"\";\n    }\n    return (\n      <Grid container spacing={2}>\n        <Grid item xs={12} md={6}>\n          <JSONEditor jsonObject={vc} onChange={(data) => {}} />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          {renderVC(vc)}\n        </Grid>\n        <Grid item xs={12}>\n          <Typography>Verified: {JSON.stringify(state.verified)}</Typography>\n        </Grid>\n      </Grid>\n    );\n  };\n\n  return (\n    <BasePage>\n      <ExpansionPanel\n        // eslint-disable-next-line\n        expanded={panelValues[\"panel0\"]}\n        onChange={handleChangePanels(\"panel0\")}\n        // style={{ maxWidth: \"500px\" }}\n      >\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls={`panel0-content`}\n          id={`panel0-header`}\n        >\n          <Typography>Create DID</Typography>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails style={{ flexDirection: \"column\" }}>\n          {renderKey()}\n          <Button\n            variant={\"contained\"}\n            style={{ marginBottom: \"32px\" }}\n            onClick={async () => {\n              const key = await generatePrivateKey();\n              setState({\n                ...state,\n                key,\n                vc: {\n                  ...state.vc,\n                  issuer: key.controller,\n                },\n              });\n              setTimeout(() => {\n                window.toPdf();\n              }, 1 * 1000);\n            }}\n          >\n            Create a DID Key\n          </Button>\n          <Typography>\n            <i>\n              Remember to print your key and store it in a private and secure\n              location.\n            </i>\n          </Typography>\n          <br />\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n\n      <ExpansionPanel\n        // eslint-disable-next-line\n        expanded={panelValues[\"panel1\"]}\n        onChange={handleChangePanels(\"panel1\")}\n      >\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls={`panel1-content`}\n          id={`panel1-header`}\n        >\n          <Typography>Import DID</Typography>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails style={{ flexDirection: \"column\" }}>\n          <Typography gutterBottom>\n            You must have a QR Code with an embedded crypto-ld private key to\n            use this method of import.\n          </Typography>\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            onClick={() => {\n              setState({\n                ...state,\n                isScanQrCodeDialogOpen: true,\n              });\n            }}\n          >\n            Scan QR Code\n          </Button>\n          <ScanQRCodeDialog\n            open={isScanQrCodeDialogOpen}\n            onSubmit={async (data) => {\n              const terrible = JSON.parse(data);\n              if (terrible.proof) {\n                const suite = new Ed25519Signature2018({});\n                const result = await vcjs.verify({\n                  credential: terrible,\n                  documentLoader: documentLoader,\n                  suite,\n                });\n                setState({\n                  ...state,\n                  vc: data,\n                  verified: result.verified,\n                  isScanQrCodeDialogOpen: false,\n                });\n              } else {\n                const edKey = await Ed25519KeyPair.from({\n                  ...terrible,\n                });\n                const doc = driver.keyToDidDoc(edKey);\n                const key1 = {\n                  id: doc.publicKey[0].id,\n                  type: edKey.type,\n                  controller: doc.id,\n                  privateKeyBase58: edKey.privateKeyBase58,\n                  publicKeyBase58: edKey.publicKeyBase58,\n                };\n                setState({\n                  ...state,\n                  key: key1,\n                  vc: {\n                    ...state.vc,\n                    issuer: key1.controller,\n                  },\n                  isScanQrCodeDialogOpen: false,\n                });\n              }\n            }}\n            onClose={() => {\n              setState({\n                ...state,\n                isScanQrCodeDialogOpen: false,\n              });\n            }}\n          />\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n\n      <ExpansionPanel\n        // eslint-disable-next-line\n        expanded={panelValues[\"panel3\"]}\n        onChange={handleChangePanels(\"panel3\")}\n      >\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls={`panel3-content`}\n          id={`panel3-header`}\n        >\n          <Typography>Import Credential</Typography>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails style={{ flexDirection: \"column\" }}>\n          {renderVerify(vc)}\n\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            onClick={() => {\n              setState({\n                ...state,\n                isScanQrCodeDialogOpen: true,\n              });\n            }}\n          >\n            Scan Credential to Verify\n          </Button>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n\n      <ExpansionPanel\n        // eslint-disable-next-line\n        expanded={panelValues[\"panel2\"]}\n        disabled={!key}\n        onChange={handleChangePanels(\"panel2\")}\n      >\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls={`panel2-content`}\n          id={`panel2-header`}\n        >\n          <Typography>Create Credential</Typography>\n        </ExpansionPanelSummary>\n        <ExpansionPanelDetails style={{ flexDirection: \"column\" }}>\n          <Grid container spacing={2}>\n            <Grid item xs={12} sm={6}>\n              <JSONEditor\n                value={JSON.stringify(vc, null, 2)}\n                onChange={(data) => {\n                  setState({\n                    ...state,\n                    vc: JSON.parse(data),\n                  });\n                }}\n                style={{ height: \"435px\", marginBottom: \"16px\" }}\n              />\n              <Button\n                variant={\"contained\"}\n                onClick={async () => {\n                  console.log(key);\n                  let suite = new Ed25519Signature2018({\n                    key,\n                  });\n                  const signed = await vcjs.issue({\n                    credential: {\n                      ...vc,\n                      issuer: key.controller,\n                    },\n                    suite,\n                    // documentLoader\n                  });\n                  setState({\n                    ...state,\n                    vc: signed,\n                  });\n                  setTimeout(() => {\n                    window.toPdf();\n                  }, 1 * 1000);\n                }}\n              >\n                Create Credential\n              </Button>\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              {renderVC(vc)}\n            </Grid>\n          </Grid>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </BasePage>\n  );\n};\n\nOfflinePDF.propTypes = {\n  wallet: PropTypes.any,\n};\n","import React from \"react\";\n\nimport { compose } from \"redux\";\n\nimport { OfflinePDF } from \"./OfflinePDF\";\n\nimport wallet from \"../../store/universal-wallet\";\n\nconst container = compose(wallet.container);\n\nexport const PdfDemo = container((props) => {\n  return <OfflinePDF {...props} />;\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Base from \"../base/base\";\n\nexport const Videos = (props) => {\n  return (\n    <Base>\n      <Typography variant={\"h5\"} gutterBottom>\n        Videos\n      </Typography>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <Typography style={{ marginTop: \"32px\" }} variant={\"h6\"} gutterBottom>\n            Offline Demo\n          </Typography>\n          <iframe\n            title=\"intro video\"\n            width=\"560\"\n            height=\"315\"\n            src=\"https://www.youtube.com/embed/-i4am8LoV7s\"\n            frameborder=\"0\"\n            allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n            allowfullscreen\n          ></iframe>\n\n          <Typography style={{ marginTop: \"32px\" }}>\n            DID Resolution, Credential Issuance and Verification, powered by\n            Progressive Web Applications, PDFs, QR Codes and printed paper.\n          </Typography>\n        </Grid>\n      </Grid>\n    </Base>\n  );\n};\n\nVideos.propTypes = {\n  wallet: PropTypes.any,\n};\n","import { Home } from \"./home\";\nimport { Workbench } from \"./workbench\";\nimport { PdfDemo } from \"./pdf\";\nimport { Videos } from \"./videos\";\n\nexport const routes = [\n  { path: \"/\", exact: true, component: Home },\n  { path: \"/workbench\", exact: true, component: Workbench },\n  { path: \"/offline\", exact: true, component: PdfDemo },\n  { path: \"/videos\", exact: true, component: Videos },\n];\n","import React from \"react\";\nimport { Videos as Page } from \"./Videos\";\n\nimport { compose } from \"redux\";\n\nimport wallet from \"../../store/universal-wallet\";\n\nconst container = compose(wallet.container);\n\nexport const Videos = container((props) => {\n  return <Page {...props} />;\n});\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Particles from 'react-particles-js';\n\nexport class ParticlesContainer extends Component {\n  render() {\n    const params = this.props.params || {\n      particles: {\n        line_linked: {\n          shadow: {\n            enable: true,\n            color: '#3CA9D1',\n            blur: 5,\n          },\n        },\n      },\n    };\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            zIndex: 2,\n            position: 'absolute',\n          }}\n        >\n          {this.props.children}\n        </div>\n\n        <Particles\n          className=\"Particles\"\n          style={{\n            zIndex: 1,\n            top: 0,\n            position: 'absolute',\n          }}\n          params={params}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nParticlesContainer.propTypes = {\n  params: PropTypes.object,\n  children: PropTypes.any,\n};\n","import React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Theme from '../../components/Theme/Theme';\n\nimport { ParticlesContainer } from '../../components/ParticlesContainer';\n\nimport './404.css';\n\nexport class NotFound extends Component {\n  render() {\n    return (\n      <Theme>\n        <div className=\"notFound\">\n          <ParticlesContainer>\n            <div className=\"copy\" style={{ padding: '32px' }}>\n              <Typography variant=\"h1\">404</Typography>\n              <Typography>\n                {window.location.pathname} page not found.\n              </Typography>\n              <br />\n              <Button\n                variant=\"contained\"\n                color={'secondary'}\n                onClick={() => {\n                  window.location.href = '/workbench';\n                }}\n              >\n                Go Home\n              </Button>\n            </div>\n          </ParticlesContainer>\n        </div>\n      </Theme>\n    );\n  }\n}\n\nexport default NotFound;\n","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\nimport { persistStore, persistReducer } from \"redux-persist\";\nimport { routerMiddleware } from \"connected-react-router\";\nimport storage from \"redux-persist/lib/storage\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk from \"redux-thunk\";\nimport withReduxEnhancer from \"addon-redux/enhancer\";\n\nimport rootReducer from \".\";\nimport history from \"./history\";\n\nexport default (appReducers = {}) => {\n  // Persistance configuration\n  const persistConfig = {\n    key: \"root\",\n    whitelist: [\"wallet\"],\n    storage,\n  };\n\n  const middlewares = [thunk, routerMiddleware(history)];\n\n  // TODO: refactor for production\n  if (process.env.NODE_ENV !== \"production\") {\n    // const reduxListener = createStorybookListener();\n    // middlewares.push(reduxListener);\n  }\n\n  // Store.\n  const store = createStore(\n    persistReducer(\n      persistConfig,\n      combineReducers({ ...rootReducer, ...appReducers })\n    ),\n    composeWithDevTools(\n      compose(applyMiddleware(...middlewares), withReduxEnhancer)\n    )\n  );\n\n  // Persistor.\n  const persistor = persistStore(store);\n  return {\n    store,\n    persistor,\n    history,\n  };\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\n\nimport { Switch, Route } from \"react-router-dom\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from \"redux-persist/lib/integration/react\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport createStore from \"./store/create\";\n\nimport { routes } from \"./pages\";\n\nimport { NotFound } from \"./pages/errors/404\";\n\nconst { store, persistor, history } = createStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate persistor={persistor}>\n      <ConnectedRouter history={history}>\n        <Switch>\n          {routes.map(({ exact, path, component }) => (\n            <Route key={path} exact={exact} path={path} component={component} />\n          ))}\n          <Route path=\"*\" render={() => <NotFound />} />\n        </Switch>\n      </ConnectedRouter>\n    </PersistGate>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\nconsole.log(\n  `\nHello Developer 🧙‍♂️! \nCheckout our corporate website if you are interested in working with us: \n✨ https://www.transmute.industries/\n`\n);\n","import base64url from 'base64url';\n\nimport * as ed25519 from '@stablelib/ed25519';\n\nimport canonicalize from 'canonicalize';\n\nclass JWSVerificationFailed extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'JWSVerificationFailed';\n  }\n}\n\nconst _jwkToSecretKey = (jwk: any) => {\n  const d = base64url.toBuffer(jwk.d);\n  const x = base64url.toBuffer(jwk.x);\n  const secretKey = new Uint8Array(Buffer.concat([d, x]));\n  return secretKey;\n};\n\nconst _jwkToPublicKey = (jwk: any) => {\n  const x = base64url.toBuffer(jwk.x);\n  const publicKey = new Uint8Array(x);\n  return publicKey;\n};\n\nexport const decode = (jws: string, options = { complete: false }) => {\n  const [encodedHeader, encodedPayload, encodedSignature] = jws.split('.');\n\n  if (options.complete) {\n    return {\n      header: JSON.parse(base64url.decode(encodedHeader)),\n      payload: JSON.parse(base64url.decode(encodedPayload)),\n      signature: encodedSignature,\n    };\n  }\n  return JSON.parse(base64url.decode(encodedPayload));\n};\n\nexport const sign = (\n  payload: any,\n  privateKeyJwk: any,\n  header: any = {\n    alg: 'EdDSA',\n  }\n) => {\n  const secretKey = _jwkToSecretKey(privateKeyJwk);\n  const encodedHeader = base64url.encode(canonicalize(header));\n  const encodedPayload = base64url.encode(canonicalize(payload));\n  const message = new Uint8Array(\n    Buffer.from(`${encodedHeader}.${encodedPayload}`)\n  );\n  const signature = ed25519.sign(secretKey, message);\n  const encodedSignature = base64url.encode(Buffer.from(signature));\n  const jws = `${encodedHeader}.${encodedPayload}.${encodedSignature}`;\n  return jws;\n};\n\nexport const signDetached = (\n  payload: Buffer,\n  privateKeyJwk: any,\n  header: any = {\n    alg: 'EdDSA',\n  }\n) => {\n  const secretKey = _jwkToSecretKey(privateKeyJwk);\n  const encodedHeader = base64url.encode(canonicalize(header));\n  const message = new Uint8Array(\n    Buffer.concat([\n      Buffer.from(encodedHeader, 'utf-8'),\n      Buffer.from('.', 'utf-8'),\n      payload,\n    ])\n  );\n  const signature = ed25519.sign(secretKey, message);\n  const encodedSignature = base64url.encode(Buffer.from(signature));\n  const jws = `${encodedHeader}..${encodedSignature}`;\n  return jws;\n};\n\nexport const verify = (jws: string, publicKeyJwk: any) => {\n  const publicKey = _jwkToPublicKey(publicKeyJwk);\n  const [encodedHeader, encodedPayload, encodedSignature] = jws.split('.');\n\n  const message = new Uint8Array(\n    Buffer.from(`${encodedHeader}.${encodedPayload}`)\n  );\n  const verified = ed25519.verify(\n    publicKey,\n    message,\n    new Uint8Array(base64url.toBuffer(encodedSignature))\n  );\n\n  if (verified) {\n    return JSON.parse(base64url.decode(encodedPayload));\n  }\n\n  throw new JWSVerificationFailed('signature verification failed');\n};\n\nexport const verifyDetached = (\n  jws: string,\n  payload: Buffer,\n  publicKeyJwk: any\n) => {\n  const publicKey = _jwkToPublicKey(publicKeyJwk);\n  const [encodedHeader, encodedSignature] = jws.split('..');\n  const message = new Uint8Array(\n    Buffer.concat([\n      Buffer.from(encodedHeader, 'utf-8'),\n      Buffer.from('.', 'utf-8'),\n      payload,\n    ])\n  );\n  const verified = ed25519.verify(\n    publicKey,\n    message,\n    new Uint8Array(base64url.toBuffer(encodedSignature))\n  );\n  return verified;\n};\n\nexport default {\n  decode,\n\n  sign,\n  signDetached,\n\n  verify,\n  verifyDetached,\n};\n","import keyto from '@trust/keyto';\nimport base64url from 'base64url';\nimport crypto from 'crypto';\nimport bs58 from 'bs58';\nimport secp256k1 from 'secp256k1';\n\nimport canonicalize from 'canonicalize';\n\nconst compressedHexEncodedPublicKeyLength = 66;\n\n/** Secp256k1 Private Key  */\nexport interface ISecp256k1PrivateKeyJwk {\n  /** key type */\n  kty: string;\n\n  /** curve */\n  crv: string;\n\n  /** private point */\n  d: string;\n\n  /** public point */\n  x: string;\n\n  /** public point */\n  y: string;\n\n  /** key id */\n  kid: string;\n}\n\n/** Secp256k1 Public Key  */\nexport interface ISecp256k1PublicKeyJwk {\n  /** key type */\n  kty: string;\n\n  /** curve */\n  crv: string;\n\n  /** public point */\n  x: string;\n\n  /** public point */\n  y: string;\n\n  /** key id */\n  kid: string;\n}\n\n/**\n * Example\n * ```js\n * {\n *  kty: 'EC',\n *  crv: 'secp256k1',\n *  d: 'rhYFsBPF9q3-uZThy7B3c4LDF_8wnozFUAEm5LLC4Zw',\n *  x: 'dWCvM4fTdeM0KmloF57zxtBPXTOythHPMm1HCLrdd3A',\n *  y: '36uMVGM7hnw-N6GnjFcihWE3SkrhMLzzLCdPMXPEXlA',\n *  kid: 'JUvpllMEYUZ2joO59UNui_XYDqxVqiFLLAJ8klWuPBw'\n * }\n * ```\n * See [rfc7638](https://tools.ietf.org/html/rfc7638) for more details on Jwk.\n */\nexport const getKid = (\n  jwk: ISecp256k1PrivateKeyJwk | ISecp256k1PublicKeyJwk\n) => {\n  const copy = { ...jwk } as any;\n  delete copy.d;\n  delete copy.kid;\n  delete copy.alg;\n  const digest = crypto\n    .createHash('sha256')\n    .update(canonicalize(copy))\n    .digest();\n\n  return base64url.encode(Buffer.from(digest));\n};\n\n/** convert compressed hex encoded private key to jwk */\nexport const privateKeyJwkFromPrivateKeyHex = async (privateKeyHex: string) => {\n  const jwk = {\n    ...keyto.from(privateKeyHex, 'blk').toJwk('private'),\n    crv: 'secp256k1',\n  };\n  const kid = getKid(jwk);\n  return {\n    ...jwk,\n    kid,\n  };\n};\n\n/** convert compressed hex encoded public key to jwk */\nexport const publicKeyJwkFromPublicKeyHex = async (publicKeyHex: string) => {\n  let key = publicKeyHex;\n  if (publicKeyHex.length === compressedHexEncodedPublicKeyLength) {\n    const keyBin = secp256k1.publicKeyConvert(\n      Buffer.from(publicKeyHex, 'hex'),\n      false\n    );\n    key = Buffer.from(keyBin).toString('hex');\n  }\n  const jwk = {\n    ...keyto.from(key, 'blk').toJwk('public'),\n    crv: 'secp256k1',\n  };\n  const kid = getKid(jwk);\n\n  return {\n    ...jwk,\n    kid,\n  };\n};\n\n/** convert pem encoded private key to jwk */\nexport const privateKeyJwkFromPrivateKeyPem = (privateKeyPem: string) => {\n  const jwk = {\n    ...keyto.from(privateKeyPem, 'pem').toJwk('private'),\n    crv: 'secp256k1',\n  };\n  // console.log(jwk);\n  const kid = getKid(jwk);\n\n  return {\n    ...jwk,\n    kid,\n  };\n};\n\n/** convert pem encoded public key to jwk */\nexport const publicKeyJwkFromPublicKeyPem = (publicKeyPem: string) => {\n  const jwk = {\n    ...keyto.from(publicKeyPem, 'pem').toJwk('public'),\n    crv: 'secp256k1',\n  };\n  const kid = getKid(jwk);\n\n  return {\n    ...jwk,\n    kid,\n  };\n};\n\n/** convert jwk to hex encoded private key */\nexport const privateKeyHexFromJwk = async (jwk: ISecp256k1PrivateKeyJwk) =>\n  keyto\n    .from(\n      {\n        ...jwk,\n        crv: 'K-256',\n      },\n      'jwk'\n    )\n    .toString('blk', 'private');\n\n/** convert jwk to hex encoded public key */\nexport const publicKeyHexFromJwk = async (jwk: ISecp256k1PublicKeyJwk) => {\n  const uncompressedPublicKey = keyto\n    .from(\n      {\n        ...jwk,\n        crv: 'K-256',\n      },\n      'jwk'\n    )\n    .toString('blk', 'public');\n\n  const compressed = secp256k1.publicKeyConvert(\n    Buffer.from(uncompressedPublicKey, 'hex'),\n    true\n  );\n  return Buffer.from(compressed).toString('hex');\n};\n\n/** convert jwk to binary encoded private key */\nexport const privateKeyUInt8ArrayFromJwk = async (\n  jwk: ISecp256k1PrivateKeyJwk\n) => {\n  const privateKeyHex = await privateKeyHexFromJwk(jwk);\n  return Buffer.from(privateKeyHex, 'hex');\n};\n\n/** convert jwk to binary encoded public key */\nexport const publicKeyUInt8ArrayFromJwk = async (\n  jwk: ISecp256k1PublicKeyJwk\n) => {\n  const publicKeyHex = await publicKeyHexFromJwk(jwk);\n  return Buffer.from(publicKeyHex, 'hex');\n};\n\n/** convert publicKeyHex to base58 */\nexport const publicKeyBase58FromPublicKeyHex = (publicKeyHex: string) => {\n  return bs58.encode(Buffer.from(publicKeyHex, 'hex'));\n};\n\n/** convert publicKeyHex to base58 */\nexport const privateKeyBase58FromPrivateKeyHex = (privateKeyHex: string) => {\n  return bs58.encode(Buffer.from(privateKeyHex, 'hex'));\n};\n\nexport const privateKeyUInt8ArrayFromPrivateKeyBase58 = async (\n  privateKeyBase58: string\n) => {\n  return bs58.decode(privateKeyBase58);\n};\n\nexport const publicKeyUInt8ArrayFromPublicKeyBase58 = async (\n  publicKeyBase58: string\n) => {\n  return bs58.decode(publicKeyBase58);\n};\n\nexport const publicKeyHexFromPrivateKeyHex = async (privateKeyHex: string) => {\n  const publicKey = secp256k1.publicKeyCreate(\n    new Uint8Array(Buffer.from(privateKeyHex, 'hex'))\n  );\n  return Buffer.from(publicKey).toString('hex');\n};\n","import bs58 from 'bs58';\n\nimport * as ed25519 from '@stablelib/ed25519';\nimport * as keyUtils from './keyUtils';\n\nimport { X25519KeyPair } from '@transmute/did-key-x25519';\n\nexport class Ed25519KeyPair {\n  public id: string;\n  public type: string;\n  public controller: string;\n  public publicKeyBase58: string;\n  public privateKeyBase58: string;\n\n  static fingerprintFromPublicKey({ publicKeyBase58 }: any) {\n    // ed25519 cryptonyms are multicodec encoded values, specifically:\n    // (multicodec ed25519-pub 0xed01 + key bytes)\n    const pubkeyBytes = bs58.decode(publicKeyBase58);\n    const buffer = new Uint8Array(2 + pubkeyBytes.length);\n    buffer[0] = 0xed;\n    buffer[1] = 0x01;\n    buffer.set(pubkeyBytes, 2);\n    // prefix with `z` to indicate multi-base base58btc encoding\n    return `z${bs58.encode(buffer)}`;\n  }\n  static async generate(options: any = {}) {\n    let key;\n    if (options.secureRandom) {\n      key = ed25519.generateKeyPair({\n        isAvailable: true,\n        randomBytes: options.secureRandom,\n      });\n    }\n\n    if (options.seed) {\n      key = ed25519.generateKeyPair({\n        isAvailable: true,\n        randomBytes: () => {\n          return Buffer.from(options.seed, 'hex');\n        },\n      });\n    }\n\n    if (!key) {\n      throw new Error('options.seed or options.secureRandom is required.');\n    }\n\n    const publicKeyBase58 = bs58.encode(key.publicKey);\n    const privateKeyBase58 = bs58.encode(key.secretKey);\n\n    const did = `did:key:${Ed25519KeyPair.fingerprintFromPublicKey({\n      publicKeyBase58,\n    })}`;\n    const keyId = `#${Ed25519KeyPair.fingerprintFromPublicKey({\n      publicKeyBase58,\n    })}`;\n    return new Ed25519KeyPair({\n      id: keyId,\n      controller: did,\n      publicKeyBase58,\n      privateKeyBase58,\n    });\n  }\n\n  static fromFingerprint({ fingerprint }: any) {\n    // skip leading `z` that indicates base58 encoding\n    const buffer = bs58.decode(fingerprint.substr(1));\n    // https://github.com/multiformats/multicodec/blob/master/table.csv#L81\n    if (buffer[0] === 0xed && buffer[1] === 0x01) {\n      const publicKeyBase58 = bs58.encode(buffer.slice(2));\n      const did = `did:key:${Ed25519KeyPair.fingerprintFromPublicKey({\n        publicKeyBase58,\n      })}`;\n      const keyId = `#${Ed25519KeyPair.fingerprintFromPublicKey({\n        publicKeyBase58,\n      })}`;\n      return new Ed25519KeyPair({\n        id: keyId,\n        controller: did,\n        publicKeyBase58,\n      });\n    }\n\n    throw new Error(`Unsupported Fingerprint Type: ${fingerprint}`);\n  }\n  static async from(options: any) {\n    let privateKeyBase58 = options.privateKeyBase58;\n    let publicKeyBase58 = options.publicKeyBase58;\n\n    if (options.privateKeyHex) {\n      privateKeyBase58 = keyUtils.privateKeyBase58FromPrivateKeyHex(\n        options.privateKeyHex\n      );\n    }\n\n    if (options.publicKeyHex) {\n      publicKeyBase58 = keyUtils.publicKeyBase58FromPublicKeyHex(\n        options.publicKeyHex\n      );\n    }\n\n    if (options.privateKeyJwk) {\n      privateKeyBase58 = keyUtils.privateKeyBase58FromPrivateKeyJwk(\n        options.privateKeyJwk\n      );\n    }\n\n    if (options.publicKeyJwk) {\n      publicKeyBase58 = keyUtils.publicKeyBase58FromPublicKeyJwk(\n        options.publicKeyJwk\n      );\n    }\n\n    return new Ed25519KeyPair({\n      ...options,\n      privateKeyBase58,\n      publicKeyBase58,\n    });\n  }\n\n  constructor(options: any = {}) {\n    this.type = 'Ed25519VerificationKey2018';\n    this.id = options.id;\n    this.controller = options.controller;\n    this.publicKeyBase58 = options.publicKeyBase58;\n    this.privateKeyBase58 = options.privateKeyBase58;\n    if (this.controller && !this.id) {\n      this.id = `${this.controller}#${this.fingerprint()}`;\n    }\n  }\n\n  get publicKey() {\n    return this.publicKeyBase58;\n  }\n\n  get privateKey() {\n    return this.privateKeyBase58;\n  }\n  addEncodedPublicKey(publicKeyNode: any) {\n    publicKeyNode.publicKeyBase58 = this.publicKeyBase58;\n    return publicKeyNode;\n  }\n\n  public publicNode({ controller = this.controller }: any = {}) {\n    const publicNode: any = {\n      id: this.id,\n      type: this.type,\n    };\n    if (controller) {\n      publicNode.controller = controller;\n    }\n\n    this.addEncodedPublicKey(publicNode); // Subclass-specific\n    return publicNode;\n  }\n\n  fingerprint() {\n    const { publicKeyBase58 } = this;\n    return Ed25519KeyPair.fingerprintFromPublicKey({ publicKeyBase58 });\n  }\n  verifyFingerprint(fingerprint: any) {\n    // fingerprint should have `z` prefix indicating\n    // that it's multi-base encoded\n    if (!(typeof fingerprint === 'string' && fingerprint[0] === 'z')) {\n      return {\n        error: new Error('`fingerprint` must be a multibase encoded string.'),\n        valid: false,\n      };\n    }\n    let fingerprintBuffer;\n    try {\n      fingerprintBuffer = bs58.decode(fingerprint.slice(1));\n    } catch (e) {\n      return { error: e, valid: false };\n    }\n    let publicKeyBuffer;\n    try {\n      publicKeyBuffer = bs58.decode(this.publicKeyBase58);\n    } catch (e) {\n      return { error: e, valid: false };\n    }\n\n    // validate the first two multicodec bytes 0xed01\n    const valid =\n      fingerprintBuffer.slice(0, 2).toString('hex') === 'ed01' &&\n      publicKeyBuffer.equals(fingerprintBuffer.slice(2));\n    if (!valid) {\n      return {\n        error: new Error('The fingerprint does not match the public key.'),\n        valid: false,\n      };\n    }\n    return { valid };\n  }\n\n  async toJwk(_private: boolean = false) {\n    if (_private) {\n      return keyUtils.privateKeyJwkFromPrivateKeyBase58(this.privateKeyBase58);\n    }\n    return keyUtils.publicKeyJwkFromPublicKeyBase58(this.publicKeyBase58);\n  }\n\n  async toHex(_private: boolean = false) {\n    if (_private) {\n      return keyUtils.privateKeyHexFromPrivateKeyBase58(this.privateKeyBase58);\n    }\n    return keyUtils.publicKeyHexFromPublicKeyBase58(this.publicKeyBase58);\n  }\n\n  toX25519KeyPair(_private: boolean = false) {\n    const x25519 = X25519KeyPair.fromEdKeyPair({\n      controller: this.controller,\n      publicKeyBase58: this.publicKeyBase58,\n      privateKeyBase58: this.privateKeyBase58,\n    });\n    if (!_private) {\n      delete x25519.privateKeyBase58;\n    }\n    return x25519;\n  }\n\n  signer() {\n    if (!this.privateKeyBase58) {\n      return {\n        async sign() {\n          throw new Error('No private key to sign with.');\n        },\n      };\n    }\n    let privateKeyBase58 = this.privateKeyBase58;\n    return {\n      async sign({ data }: any) {\n        const signatureUInt8Array = ed25519.sign(\n          bs58.decode(privateKeyBase58),\n          data\n        );\n        return signatureUInt8Array;\n      },\n    };\n  }\n  verifier() {\n    if (!this.publicKeyBase58) {\n      return {\n        async sign() {\n          throw new Error('No public key to verify with.');\n        },\n      };\n    }\n    let publicKeyBase58 = this.publicKeyBase58;\n    return {\n      async verify({ data, signature }: any) {\n        let verified = false;\n        try {\n          verified = ed25519.verify(\n            bs58.decode(publicKeyBase58),\n            data,\n            signature\n          );\n        } catch (e) {\n          console.error('An error occurred when verifying signature: ', e);\n        }\n        return verified;\n      },\n    };\n  }\n}\n","import bs58 from 'bs58';\nimport {\n  convertPublicKeyToX25519,\n  convertSecretKeyToX25519,\n} from '@stablelib/ed25519';\nimport * as x25519 from '@stablelib/x25519';\nimport * as keyUtils from './keyUtils';\nexport class X25519KeyPair {\n  public id: string;\n  public type: string;\n  public controller: string;\n  public publicKeyBase58: string;\n  public privateKeyBase58: string;\n\n  static fingerprintFromPublicKey({ publicKeyBase58 }: any) {\n    // https://github.com/multiformats/multicodec/blob/master/table.csv#L80\n    const pubkeyBytes = bs58.decode(publicKeyBase58);\n    const buffer = new Uint8Array(2 + pubkeyBytes.length);\n    buffer[0] = 0xec;\n    buffer[1] = 0x01;\n    buffer.set(pubkeyBytes, 2);\n    // prefix with `z` to indicate multi-base base58btc encoding\n    return `z${bs58.encode(buffer)}`;\n  }\n  static async generate(options: any = {}) {\n    let key;\n    if (options.secureRandom) {\n      key = x25519.generateKeyPair({\n        isAvailable: true,\n        randomBytes: options.secureRandom,\n      });\n    }\n\n    if (options.seed) {\n      key = x25519.generateKeyPair({\n        isAvailable: true,\n        randomBytes: () => {\n          return Buffer.from(options.seed, 'hex');\n        },\n      });\n    }\n\n    if (!key) {\n      throw new Error('options.seed or options.secureRandom is required.');\n    }\n\n    const publicKeyBase58 = bs58.encode(key.publicKey);\n    const privateKeyBase58 = bs58.encode(key.secretKey);\n\n    const did = `did:key:${X25519KeyPair.fingerprintFromPublicKey({\n      publicKeyBase58,\n    })}`;\n    const keyId = `#${X25519KeyPair.fingerprintFromPublicKey({\n      publicKeyBase58,\n    })}`;\n    return new X25519KeyPair({\n      id: keyId,\n      controller: did,\n      publicKeyBase58,\n      privateKeyBase58,\n    });\n  }\n\n  static fromFingerprint({ fingerprint }: any) {\n    // skip leading `z` that indicates base58 encoding\n    const buffer = bs58.decode(fingerprint.substr(1));\n    // https://github.com/multiformats/multicodec/blob/master/table.csv#L80\n    if (buffer[0] === 0xec && buffer[1] === 0x01) {\n      const publicKeyBase58 = bs58.encode(buffer.slice(2));\n      const did = `did:key:${X25519KeyPair.fingerprintFromPublicKey({\n        publicKeyBase58,\n      })}`;\n      const keyId = `#${X25519KeyPair.fingerprintFromPublicKey({\n        publicKeyBase58,\n      })}`;\n      return new X25519KeyPair({\n        id: keyId,\n        controller: did,\n        publicKeyBase58,\n      });\n    }\n\n    throw new Error(`Unsupported Fingerprint Type: ${fingerprint}`);\n  }\n\n  static fromEdKeyPair(ed25519KeyPair: any) {\n    let publicKeyBase58;\n    let privateKeyBase58;\n    if (ed25519KeyPair.publicKeyBase58) {\n      publicKeyBase58 = bs58.encode(\n        convertPublicKeyToX25519(bs58.decode(ed25519KeyPair.publicKeyBase58))\n      );\n    }\n    if (ed25519KeyPair.privateKeyBase58) {\n      privateKeyBase58 = bs58.encode(\n        convertSecretKeyToX25519(bs58.decode(ed25519KeyPair.privateKeyBase58))\n      );\n    }\n\n    return X25519KeyPair.from({\n      controller: ed25519KeyPair.controller,\n      publicKeyBase58,\n      privateKeyBase58,\n    });\n  }\n\n  static from(options: any) {\n    let privateKeyBase58 = options.privateKeyBase58;\n    let publicKeyBase58 = options.publicKeyBase58;\n\n    if (options.privateKeyHex) {\n      privateKeyBase58 = keyUtils.privateKeyBase58FromPrivateKeyHex(\n        options.privateKeyHex\n      );\n    }\n\n    if (options.publicKeyHex) {\n      publicKeyBase58 = keyUtils.publicKeyBase58FromPublicKeyHex(\n        options.publicKeyHex\n      );\n    }\n\n    if (options.privateKeyJwk) {\n      privateKeyBase58 = keyUtils.privateKeyBase58FromPrivateKeyJwk(\n        options.privateKeyJwk\n      );\n    }\n\n    if (options.publicKeyJwk) {\n      publicKeyBase58 = keyUtils.publicKeyBase58FromPublicKeyJwk(\n        options.publicKeyJwk\n      );\n    }\n\n    return new X25519KeyPair({\n      ...options,\n      privateKeyBase58,\n      publicKeyBase58,\n    });\n  }\n\n  constructor(options: any = {}) {\n    this.type = 'X25519KeyAgreementKey2019';\n    this.id = options.id;\n    this.controller = options.controller;\n    this.publicKeyBase58 = options.publicKeyBase58;\n    this.privateKeyBase58 = options.privateKeyBase58;\n    if (!this.id) {\n      this.id = `#${this.fingerprint()}`;\n    }\n  }\n\n  get publicKey() {\n    return this.publicKeyBase58;\n  }\n\n  get privateKey() {\n    return this.privateKeyBase58;\n  }\n  addEncodedPublicKey(publicKeyNode: any) {\n    publicKeyNode.publicKeyBase58 = this.publicKeyBase58;\n    return publicKeyNode;\n  }\n\n  fingerprint() {\n    const { publicKeyBase58 } = this;\n    return X25519KeyPair.fingerprintFromPublicKey({ publicKeyBase58 });\n  }\n  verifyFingerprint(fingerprint: any) {\n    // fingerprint should have `z` prefix indicating\n    // that it's multi-base encoded\n    if (!(typeof fingerprint === 'string' && fingerprint[0] === 'z')) {\n      return {\n        error: new Error('`fingerprint` must be a multibase encoded string.'),\n        valid: false,\n      };\n    }\n    let fingerprintBuffer;\n    try {\n      fingerprintBuffer = bs58.decode(fingerprint.slice(1));\n    } catch (e) {\n      return { error: e, valid: false };\n    }\n    let publicKeyBuffer;\n    try {\n      publicKeyBuffer = bs58.decode(this.publicKeyBase58);\n    } catch (e) {\n      return { error: e, valid: false };\n    }\n\n    // validate the first two multicodec bytes 0xec01\n    // https://github.com/multiformats/multicodec/blob/master/table.csv#L80\n    const valid =\n      fingerprintBuffer.slice(0, 2).toString('hex') === 'ec01' &&\n      publicKeyBuffer.equals(fingerprintBuffer.slice(2));\n    if (!valid) {\n      return {\n        error: new Error('The fingerprint does not match the public key.'),\n        valid: false,\n      };\n    }\n    return { valid };\n  }\n\n  async toJwk(_private: boolean = false) {\n    if (_private) {\n      return keyUtils.privateKeyJwkFromPrivateKeyBase58(\n        this.publicKeyBase58,\n        this.privateKeyBase58\n      );\n    }\n    return keyUtils.publicKeyJwkFromPublicKeyBase58(this.publicKeyBase58);\n  }\n\n  async toHex(_private: boolean = false) {\n    if (_private) {\n      return keyUtils.privateKeyHexFromPrivateKeyBase58(this.privateKeyBase58);\n    }\n    return keyUtils.publicKeyHexFromPublicKeyBase58(this.publicKeyBase58);\n  }\n\n  deriveSecret({ publicKey }: any) {\n    const remotePubkeyBytes = bs58.decode(publicKey.publicKeyBase58);\n    const privateKeyBytes = bs58.decode(this.privateKeyBase58);\n\n    const scalarMultipleResult = x25519.sharedKey(\n      new Uint8Array(privateKeyBytes),\n      new Uint8Array(remotePubkeyBytes),\n      true\n    );\n\n    return scalarMultipleResult;\n    // // hashing may be optional here...\n    // // https://github.com/digitalbazaar/edv-client/issues/64\n    // const key = crypto\n    //   .createHash('sha256')\n    //   .update(scalarMultipleResult)\n    //   .digest();\n    // expect(key.toString('hex')).toEqual(fixtures.sharedKey);\n  }\n}\n","import base64url from 'base64url';\n\nimport crypto from 'crypto';\nimport secp256k1 from 'secp256k1';\n\nimport {\n  ISecp256k1PrivateKeyJwk,\n  ISecp256k1PublicKeyJwk,\n  privateKeyUInt8ArrayFromJwk,\n  publicKeyUInt8ArrayFromJwk,\n} from './keyUtils';\n\n/** error matching @panva/jose for JWS verification failure. */\nclass JWSVerificationFailed extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'JWSVerificationFailed';\n  }\n}\n\n/** JWS Header */\nexport interface IJWSHeader {\n  /** algorithm, ES256K */\n  alg: string;\n\n  /** type, JWT */\n  typ?: string;\n  /** signing key id, ... */\n  kid?: string;\n}\n\n/** Produce a JWS Unencoded Payload per https://tools.ietf.org/html/rfc7797#section-6 */\nexport const signDetached = async (\n  // in the case of EcdsaSecp256k1Signature2019 this is the result of createVerifyData\n  payload: Buffer,\n  privateKeyJwk: ISecp256k1PrivateKeyJwk,\n  header = {\n    alg: 'ES256K',\n    b64: false,\n    crit: ['b64'],\n  }\n) => {\n  const privateKeyUInt8Array = await privateKeyUInt8ArrayFromJwk(privateKeyJwk);\n\n  const encodedHeader = base64url.encode(JSON.stringify(header));\n\n  const toBeSignedBuffer = Buffer.concat([\n    Buffer.from(encodedHeader + '.', 'utf8'),\n    Buffer.from(payload.buffer, payload.byteOffset, payload.length),\n  ]);\n\n  const message = Buffer.from(toBeSignedBuffer);\n\n  const digest = crypto\n    .createHash('sha256')\n    .update(message)\n    .digest();\n\n  const messageHashUInt8Array = digest;\n  const sigObj: any = secp256k1.ecdsaSign(\n    messageHashUInt8Array,\n    privateKeyUInt8Array\n  );\n\n  const encodedSignature = base64url.encode(Buffer.from(sigObj.signature));\n\n  return `${encodedHeader}..${encodedSignature}`;\n};\n\n/** Verify a JWS Unencoded Payload per https://tools.ietf.org/html/rfc7797#section-6 */\nexport const verifyDetached = async (\n  jws: string,\n  payload: Buffer,\n  publicKeyJwk: ISecp256k1PublicKeyJwk\n) => {\n  if (jws.indexOf('..') === -1) {\n    throw new JWSVerificationFailed('not a valid rfc7797 jws.');\n  }\n  const [encodedHeader, encodedSignature] = jws.split('..');\n  const header = JSON.parse(base64url.decode(encodedHeader));\n  if (header.alg !== 'ES256K') {\n    throw new Error('JWS alg is not signed with ES256K.');\n  }\n  if (\n    header.b64 !== false ||\n    !header.crit ||\n    !header.crit.length ||\n    header.crit[0] !== 'b64'\n  ) {\n    throw new Error('JWS Header is not in rfc7797 format (not detached).');\n  }\n  const publicKeyUInt8Array = await publicKeyUInt8ArrayFromJwk(publicKeyJwk);\n  const toBeSignedBuffer = Buffer.concat([\n    Buffer.from(encodedHeader + '.', 'utf8'),\n    Buffer.from(payload.buffer, payload.byteOffset, payload.length),\n  ]);\n  const message = Buffer.from(toBeSignedBuffer);\n  const digest = crypto\n    .createHash('sha256')\n    .update(message)\n    .digest();\n\n  const messageHashUInt8Array = digest;\n  const signatureUInt8Array = base64url.toBuffer(encodedSignature);\n  const verified = secp256k1.ecdsaVerify(\n    signatureUInt8Array,\n    messageHashUInt8Array,\n    publicKeyUInt8Array\n  );\n  if (verified) {\n    return true;\n  }\n  throw new Error('Cannot verify detached signature.');\n};\n\n/** Produce a normal ES256K JWS */\nexport const sign = async (\n  payload: any,\n  privateKeyJwk: ISecp256k1PrivateKeyJwk,\n  header: IJWSHeader = { alg: 'ES256K' }\n) => {\n  const privateKeyUInt8Array = await privateKeyUInt8ArrayFromJwk(privateKeyJwk);\n\n  const encodedHeader = base64url.encode(JSON.stringify(header));\n  const encodedPayload = base64url.encode(JSON.stringify(payload));\n  const toBeSigned = `${encodedHeader}.${encodedPayload}`;\n  const message = Buffer.from(toBeSigned);\n\n  const digest = crypto\n    .createHash('sha256')\n    .update(message)\n    .digest();\n\n  const messageHashUInt8Array = digest;\n\n  const sigObj: any = secp256k1.ecdsaSign(\n    messageHashUInt8Array,\n    privateKeyUInt8Array\n  );\n\n  const encodedSignature = base64url.encode(sigObj.signature);\n  return `${encodedHeader}.${encodedPayload}.${encodedSignature}`;\n};\n\n/** Verify an ES256K JWS, returns the decoded object if successful, throws otherwise. */\nexport const verify = async (\n  jws: string,\n  publicKeyJwk: ISecp256k1PublicKeyJwk\n) => {\n  const publicKeyUInt8Array = await publicKeyUInt8ArrayFromJwk(publicKeyJwk);\n  const [encodedHeader, encodedPayload, encodedSignature] = jws.split('.');\n  const toBeSigned = `${encodedHeader}.${encodedPayload}`;\n\n  const message = Buffer.from(toBeSigned);\n  const digest = crypto\n    .createHash('sha256')\n    .update(message)\n    .digest();\n\n  const messageHashUInt8Array = digest;\n\n  const signatureUInt8Array = base64url.toBuffer(encodedSignature);\n\n  const verified = secp256k1.ecdsaVerify(\n    signatureUInt8Array,\n    messageHashUInt8Array,\n    publicKeyUInt8Array\n  );\n  if (verified) {\n    return JSON.parse(base64url.decode(encodedPayload));\n  }\n  throw new JWSVerificationFailed('signature verification failed');\n};\n\n/** decode a JWS (without verifying it) */\nexport const decode = (jws: string, options = { complete: false }) => {\n  const [encodedHeader, encodedPayload, encodedSignature] = jws.split('.');\n\n  if (options.complete) {\n    return {\n      header: JSON.parse(base64url.decode(encodedHeader)),\n      payload: JSON.parse(base64url.decode(encodedPayload)),\n      signature: encodedSignature,\n    };\n  }\n  return JSON.parse(base64url.decode(encodedPayload));\n};\n","import crypto from 'crypto';\n\nimport * as keyUtils from './keyUtils';\nimport bs58 from 'bs58';\nimport secp256k1 from 'secp256k1';\n\nconst _generate = (secureRandom: any) => {\n  let privateKey;\n  do {\n    privateKey = secureRandom();\n  } while (!secp256k1.privateKeyVerify(privateKey));\n\n  const publicKey = secp256k1.publicKeyCreate(privateKey);\n  return { publicKey, privateKey };\n};\n\nexport class Secp256k1KeyPair {\n  public id: string;\n  public type: string;\n  public controller: string;\n\n  public publicKeyBase58: string;\n  public privateKeyBase58: string;\n\n  static fingerprintFromPublicKey({ publicKeyBase58 }: any) {\n    const pubkeyBytes = bs58.decode(publicKeyBase58);\n    const buffer = new Uint8Array(2 + pubkeyBytes.length);\n    // See https://github.com/multiformats/multicodec/blob/master/table.csv\n    // 0xe7 is Secp256k1 public key\n    buffer[0] = 0xe7; //\n    buffer[1] = 0x01;\n    buffer.set(pubkeyBytes, 2);\n    // prefix with `z` to indicate multi-base base58btc encoding\n    return `z${bs58.encode(buffer)}`;\n  }\n\n  static async generate(options: any = {}) {\n    let privateKey;\n    let publicKey;\n    if (options.secureRandom) {\n      ({ privateKey, publicKey } = _generate(options.secureRandom));\n    }\n    if (options.seed) {\n      ({ privateKey, publicKey } = _generate(() => {\n        return new Uint8Array(options.seed);\n      }));\n    }\n    if (!privateKey) {\n      throw new Error('Cannot generate private key.');\n    }\n\n    const publicKeyBase58 = keyUtils.publicKeyBase58FromPublicKeyHex(\n      Buffer.from(publicKey).toString('hex')\n    );\n    const privateKeyBase58 = keyUtils.privateKeyBase58FromPrivateKeyHex(\n      Buffer.from(privateKey).toString('hex')\n    );\n\n    const did = `did:key:${Secp256k1KeyPair.fingerprintFromPublicKey({\n      publicKeyBase58,\n    })}`;\n    const keyId = `#${Secp256k1KeyPair.fingerprintFromPublicKey({\n      publicKeyBase58,\n    })}`;\n\n    return new Secp256k1KeyPair({\n      id: keyId,\n      controller: did,\n      publicKeyBase58,\n      privateKeyBase58,\n    });\n  }\n\n  static async from(options: any) {\n    let privateKeyBase58 = options.privateKeyBase58;\n    let publicKeyBase58 = options.publicKeyBase58;\n\n    if (options.privateKeyHex) {\n      privateKeyBase58 = await keyUtils.privateKeyBase58FromPrivateKeyHex(\n        options.privateKeyHex\n      );\n    }\n\n    if (options.publicKeyHex) {\n      publicKeyBase58 = await keyUtils.publicKeyBase58FromPublicKeyHex(\n        options.publicKeyHex\n      );\n    }\n\n    if (options.privateKeyJwk) {\n      privateKeyBase58 = keyUtils.privateKeyBase58FromPrivateKeyHex(\n        await keyUtils.privateKeyHexFromJwk(options.privateKeyJwk)\n      );\n    }\n\n    if (options.publicKeyJwk) {\n      publicKeyBase58 = keyUtils.privateKeyBase58FromPrivateKeyHex(\n        await keyUtils.publicKeyHexFromJwk(options.publicKeyJwk)\n      );\n    }\n\n    return new Secp256k1KeyPair({\n      ...options,\n      privateKeyBase58,\n      publicKeyBase58,\n    });\n  }\n\n  static fromFingerprint({ fingerprint }: any) {\n    // skip leading `z` that indicates base58 encoding\n    const buffer = bs58.decode(fingerprint.substr(1));\n\n    // https://github.com/multiformats/multicodec/blob/master/table.csv#L77\n    if (buffer[0] === 0xe7 && buffer[1] === 0x01) {\n      const publicKeyBase58 = bs58.encode(buffer.slice(2));\n      const did = `did:key:${Secp256k1KeyPair.fingerprintFromPublicKey({\n        publicKeyBase58,\n      })}`;\n      const keyId = `#${Secp256k1KeyPair.fingerprintFromPublicKey({\n        publicKeyBase58,\n      })}`;\n      return new Secp256k1KeyPair({\n        id: keyId,\n        controller: did,\n        publicKeyBase58,\n      });\n    }\n\n    throw new Error(`Unsupported Fingerprint Type: ${fingerprint}`);\n  }\n\n  constructor(options: any = {}) {\n    this.type = 'EcdsaSecp256k1VerificationKey2019';\n\n    this.id = options.id;\n    this.controller = options.controller;\n    this.privateKeyBase58 = options.privateKeyBase58;\n    this.publicKeyBase58 = options.publicKeyBase58;\n  }\n\n  get publicKey() {\n    return this.publicKeyBase58;\n  }\n\n  get privateKey() {\n    return this.privateKeyBase58;\n  }\n\n  signer() {\n    if (!this.privateKeyBase58) {\n      return {\n        async sign() {\n          throw new Error('No private key to sign with.');\n        },\n      };\n    }\n    let privateKeyBase58 = this.privateKeyBase58;\n    return {\n      async sign({ data }: any) {\n        const messageHashUInt8Array = crypto\n          .createHash('sha256')\n          .update(data)\n          .digest();\n        const privateKeyUInt8Array = await keyUtils.privateKeyUInt8ArrayFromPrivateKeyBase58(\n          privateKeyBase58\n        );\n        const sigObj: any = secp256k1.ecdsaSign(\n          messageHashUInt8Array,\n          privateKeyUInt8Array\n        );\n\n        return sigObj.signature;\n      },\n    };\n  }\n\n  verifier() {\n    if (!this.publicKeyBase58) {\n      return {\n        async sign() {\n          throw new Error('No public key to verify with.');\n        },\n      };\n    }\n    let publicKeyBase58 = this.publicKeyBase58;\n    return {\n      async verify({ data, signature }: any) {\n        const messageHashUInt8Array = crypto\n          .createHash('sha256')\n          .update(data)\n          .digest();\n\n        const publicKeyUInt8Array = await keyUtils.publicKeyUInt8ArrayFromPublicKeyBase58(\n          publicKeyBase58\n        );\n\n        let verified = false;\n        try {\n          verified = secp256k1.ecdsaVerify(\n            signature,\n            messageHashUInt8Array,\n            publicKeyUInt8Array\n          );\n        } catch (e) {\n          console.error('An error occurred when verifying signature: ', e);\n        }\n        return verified;\n      },\n    };\n  }\n\n  addEncodedPublicKey(publicKeyNode: any) {\n    publicKeyNode.publicKeyBase58 = this.publicKeyBase58;\n    return publicKeyNode;\n  }\n\n  fingerprint() {\n    const { publicKeyBase58 } = this;\n    return Secp256k1KeyPair.fingerprintFromPublicKey({ publicKeyBase58 });\n  }\n\n  verifyFingerprint(fingerprint: string) {\n    // fingerprint should have `z` prefix indicating\n    // that it's multi-base encoded\n    if (!(typeof fingerprint === 'string' && fingerprint[0] === 'z')) {\n      return {\n        error: new Error('`fingerprint` must be a multibase encoded string.'),\n        valid: false,\n      };\n    }\n    let fingerprintBuffer;\n    try {\n      fingerprintBuffer = bs58.decode(fingerprint.slice(1));\n    } catch (e) {\n      return { error: e, valid: false };\n    }\n    let publicKeyBuffer;\n    try {\n      publicKeyBuffer = bs58.decode(this.publicKeyBase58);\n    } catch (e) {\n      return { error: e, valid: false };\n    }\n\n    // validate the first two multicodec bytes 0xe701\n    const valid =\n      fingerprintBuffer.slice(0, 2).toString('hex') === 'e701' &&\n      publicKeyBuffer.equals(fingerprintBuffer.slice(2));\n    if (!valid) {\n      return {\n        error: new Error('The fingerprint does not match the public key.'),\n        valid: false,\n      };\n    }\n    return { valid };\n  }\n\n  publicNode({ controller = this.controller } = {}) {\n    const publicNode: any = {\n      id: this.id,\n      type: this.type,\n    };\n    if (controller) {\n      publicNode.controller = controller;\n    }\n    this.addEncodedPublicKey(publicNode); // Subclass-specific\n    return publicNode;\n  }\n\n  async toJwk(_private: boolean = false) {\n    if (_private) {\n      return keyUtils.privateKeyJwkFromPrivateKeyHex(\n        bs58.decode(this.privateKeyBase58).toString('hex')\n      );\n    }\n    return keyUtils.publicKeyJwkFromPublicKeyHex(\n      bs58.decode(this.publicKeyBase58).toString('hex')\n    );\n  }\n\n  async toHex(_private: boolean = false) {\n    if (_private) {\n      return keyUtils.privateKeyHexFromJwk(\n        await keyUtils.privateKeyJwkFromPrivateKeyHex(\n          bs58.decode(this.privateKeyBase58).toString('hex')\n        )\n      );\n    }\n    return keyUtils.publicKeyHexFromJwk(\n      await keyUtils.publicKeyJwkFromPublicKeyHex(\n        bs58.decode(this.publicKeyBase58).toString('hex')\n      )\n    );\n  }\n}\n","\n'use strict'\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./did-key-bls12381.cjs.production.min.js')\n} else {\n  module.exports = require('./did-key-bls12381.cjs.development.js')\n}\n","import { withHandlers } from \"recompose\";\nimport { EdvClient } from \"edv-client\";\nimport { UniversalWallet2020, VaultClient } from \"@transmute/universal-wallet\";\n\n// correct horse battery staple\n\nconst getClient = async (wallet) => {\n  let _wallet = new UniversalWallet2020(wallet.contents);\n  const entropy = _wallet.contents.find((c) => {\n    return c.type === \"Entropy\";\n  });\n  const ed25519Key = _wallet.contents.find((c) => {\n    return c.type === \"Ed25519VerificationKey2018\";\n  });\n  ed25519Key.controller = ed25519Key.id.split(\"#\")[0];\n  const x25519Key = _wallet.contents.find((c) => {\n    return c.type === \"X25519KeyAgreementKey2019\";\n  });\n  x25519Key.controller = x25519Key.id.split(\"#\")[0];\n  let client = await VaultClient.fromDerivedContents(\n    wallet.vaultEndpoint,\n    ed25519Key,\n    x25519Key,\n    Buffer.from(entropy.value, \"hex\")\n  );\n  return client;\n};\n\nconst isContentPersisted = (localContents, id) => {\n  return (\n    localContents.find((c) => {\n      return c.id === id;\n    }) !== undefined\n  );\n};\n\nexport default withHandlers({\n  setUniversalWalletProp: ({ setUniversalWalletProp }) => (payload) => {\n    setUniversalWalletProp(payload);\n  },\n  generateWallet: ({ setUniversalWalletProp }) => async (_seed) => {\n    if (!_seed) {\n      throw new Error(\"seed is required.\");\n    }\n    let wallet = await UniversalWallet2020.generate(_seed);\n    setUniversalWalletProp({\n      status: wallet.status,\n      contents: wallet.contents,\n    });\n  },\n  toggleLockStatus: ({ setUniversalWalletProp }) => async ({\n    status,\n    password,\n    contents,\n  }) => {\n    let wallet = new UniversalWallet2020(contents);\n    wallet.status = status;\n\n    if (status === \"LOCKED\") {\n      await wallet.unlock(password);\n    }\n    if (status === \"UNLOCKED\") {\n      await wallet.lock(password);\n    }\n    setUniversalWalletProp({\n      status: wallet.status,\n      contents: wallet.contents,\n    });\n  },\n\n  deleteWallet: ({ setUniversalWalletProp }) => async () => {\n    setUniversalWalletProp({\n      status: \"UNLOCKED\",\n      contents: [],\n    });\n  },\n\n  importWallet: ({ setUniversalWalletProp }) => async (encryptedWallet) => {\n    let wallet = new UniversalWallet2020();\n    await wallet.import(encryptedWallet);\n    setUniversalWalletProp({\n      status: wallet.status,\n      contents: wallet.contents,\n    });\n  },\n\n  exportWallet: () => async (status, contents) => {\n    if (status !== \"LOCKED\") {\n      throw new Error(\"Cannot export unlocked wallet.\");\n    }\n    let wallet = new UniversalWallet2020(contents);\n    wallet.status = status;\n    return wallet.export();\n  },\n\n  saveWallet: ({ setUniversalWalletProp }) => async (contents) => {\n    setUniversalWalletProp({\n      contents,\n    });\n  },\n  issueCredential: ({ wallet, setUniversalWalletProp }) => async ({\n    credential,\n    options,\n  }) => {\n    let _wallet = new UniversalWallet2020(wallet.contents);\n    const verifiableCredential = await _wallet.issue({\n      credential,\n      options,\n    });\n    setUniversalWalletProp({\n      contents: [verifiableCredential, ..._wallet.contents],\n    });\n  },\n  proveVerifiableCredential: ({ wallet, setUniversalWalletProp }) => async ({\n    verifiableCredential,\n    options,\n  }) => {\n    let _wallet = new UniversalWallet2020(wallet.contents);\n    const verifiablePresentation = await _wallet.prove({\n      verifiableCredential,\n      options,\n    });\n    setUniversalWalletProp({\n      contents: [verifiablePresentation, ..._wallet.contents],\n    });\n  },\n  syncVault: ({ wallet, setUniversalWalletProp }) => async () => {\n    setUniversalWalletProp({\n      isSyncing: true,\n    });\n    const client = await getClient(wallet);\n\n    let contents = [];\n    try {\n      contents = await client.getWalletContents();\n    } catch (e) {\n      console.log(e);\n      if (e.message === \"Request failed with status code 404\") {\n        // no-op we will add content that does not existt anyway..\n      }\n    }\n    // console.log('remote wallet contents: ', contents);\n\n    for (const content of wallet.contents) {\n      // console.log({ content });\n      const isPersisted = isContentPersisted(contents, content.id);\n      // console.log({ isPersisted });\n      if (!isPersisted) {\n        let data = JSON.parse(JSON.stringify(content));\n        delete data.tableData;\n        const doc = {\n          id: await EdvClient.generateId(),\n          content: {\n            schema: \"https://schema.org/UniversalWallet\",\n            data,\n          },\n        };\n        await client.addWalletContent(doc);\n        // console.log({ response });\n      }\n    }\n\n    contents = await client.getWalletContents();\n    setUniversalWalletProp({\n      isSyncing: false,\n      contents,\n    });\n  },\n});\n","module.exports = __webpack_public_path__ + \"static/media/logo.33b194d8.svg\";"],"sourceRoot":""}